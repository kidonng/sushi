{
    "version": "0.1.0-rc3",
    "description": "NaiveProxy plugin for Qv2ray",
    "homepage": "https://github.com/Qv2ray/QvPlugin-NaiveProxy",
    "license": "GPL-3.0-or-later",
    "depends": ["extras/qv2ray", "naiveproxy"],
    "architecture": {
        "64bit": {
            "url": "https://github.com/Qv2ray/QvPlugin-NaiveProxy/releases/download/v0.1.0-rc3/QvPlugin-NaiveProxy.v0.1.0-rc3.Windows-x64.dll",
            "hash": "4599f2a0cf04794b9ff6b29ca53bff06282872b619b43c4ad39a2ba4466f8596"
        },
        "32bit": {
            "url": "https://github.com/Qv2ray/QvPlugin-NaiveProxy/releases/download/v0.1.0-rc3/QvPlugin-NaiveProxy.v0.1.0-rc3.Windows-x86.dll",
            "hash": "ecbc17f404f33963966d1bfde445d177e0426d887eb9512c05a8d91d90b4e2dc"
        }
    },
    "installer": {
        "script": [
            "function LinkFile([String] $file, [String] $source = $file) {",
            "    Write-Host \"Creating hardlink for $file\"",
            "    New-Item -Force -ItemType HardLink -Path \"$(appdir qv2ray $global)\\current\\config\\plugins\" -Name $file -Target \"$dir\\$source\" | Out-Null",
            "}",
            "LinkFile 'naiveproxy.dll' '*.dll'",
            "$config = \"$(appdir qv2ray $global)\\current\\config\\plugin_settings\\qvplugin_naiveproxy.conf\"",
            "if (-not (Test-Path $config)) {",
            "    New-Item \"$(appdir qv2ray $global)\\current\\config\\plugin_settings\" -ItemType Directory | Out-Null",
            "    $naiveproxyPath = $(appdir naiveproxy $global).Replace('\\', '/')",
            "    @{",
            "        'kernelPath' = \"$naiveproxyPath/current/naive.exe\"",
            "    } | ConvertTo-Json -Depth 20 | Out-File $config -Encoding ascii",
            "}"
        ]
    },
    "uninstaller": {
        "script": "Remove-Item \"$(appdir qv2ray $global)\\current\\config\\plugins\\naiveproxy.dll\" -Force"
    },
    "checkver": {
        "url": "https://github.com/Qv2ray/QvPlugin-NaiveProxy/releases",
        "regex": "/releases/tag/(?:v|V)?([\\w.-]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/Qv2ray/QvPlugin-NaiveProxy/releases/download/v$version/QvPlugin-NaiveProxy.v$version.Windows-x64.dll"
            },
            "32bit": {
                "url": "https://github.com/Qv2ray/QvPlugin-NaiveProxy/releases/download/v$version/QvPlugin-NaiveProxy.v$version.Windows-x86.dll"
            }
        },
        "hash": {
            "url": "https://github.com/Qv2ray/QvPlugin-NaiveProxy/releases/download/v$version/sha256.list"
        }
    }
}
